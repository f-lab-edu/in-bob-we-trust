FROM openjdk:11.0.10-jre-slim-buster

# 빌드목적
ARG JAR_FILENAME='delivery-info-service.jar'
ARG PACKAGE_JAR_LOCATION=build/libs/${JAR_FILENAME}
ARG VERSION=default

# 실행목적
# docker run --e 로 오버라이딩
ENV COMMAND_LINE_ARGS_BEFORE=${COMMAND_LINE_ARGS_BEFORE}
ENV COMMAND_LINE_ARGS_AFTER=${COMMAND_LINE_ARGS_AFTER}
ENV SERVER_PORT=8888
ENV VERSION=$VERSION

ADD ${PACKAGE_JAR_LOCATION} app.jar

EXPOSE ${SERVER_PORT}:8888
ENTRYPOINT java ${COMMAND_LINE_ARGS_BEFORE} ${VERSION} -jar ./app.jar ${COMMAND_LINE_ARGS_AFTER}
