<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.inbobwetrust.repository.DeliveryRepository">
    <insert id="save" parameterType="Delivery">
        INSERT INTO tbl_delivery
        (order_id, rider_id, agency_id, order_status, pickup_time, finish_time)
        VALUES(#{orderId}, #{riderId}, #{agencyId}, #{orderStatus}, #{pickupTime},#{finishTime});
    </insert>

    <select id="findByOrderId" parameterType="java.lang.Long" resultType="Delivery">
        SELECT id, order_id, rider_id, agency_id, order_status, pickup_time, finish_time, created_at, updated_at
        FROM tbl_delivery
        WHERE order_id =
        <if test="id !=null">#{orderId}</if>

    </select>

    <select id="findAll" resultType="Delivery">
        SELECT id, order_id, rider_id, agency_id, order_status, pickup_time, finish_time, created_at, updated_at
        FROM tbl_delivery
    </select>
    <select id="findDeliveryStatusByOrderId" resultType="DeliveryStatus">
        SELECT order_id, order_status
        FROM tbl_delivery
        WHERE order_id = #{orderId}
    </select>
    <update id="update" parameterType="Delivery">
        UPDATE tbl_delivery
        SET order_id=#{orderId}, rider_id=#{riderId}, agency_id=#{agencyId}, order_status=#{orderStatus},
        pickup_time=#{pickupTime}, finish_time=#{finishTime}
        WHERE id=#{id};

    </update>
</mapper>
